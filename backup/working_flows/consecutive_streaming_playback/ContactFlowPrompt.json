{
  "Version": "2019-10-30",
  "StartAction": "88a9374a-374a-443c-a12a-74e5ab4156df",
  "Metadata": {
    "entryPointPosition": {
      "x": 40,
      "y": 40
    },
    "ActionMetadata": {
      "58f4ee4f-8a66-456a-a09d-067b92bc44b3": {
        "position": {
          "x": 1055.2,
          "y": 564.8
        }
      },
      "88a9374a-374a-443c-a12a-74e5ab4156df": {
        "position": {
          "x": 172.8,
          "y": 35.2
        },
        "children": [
          "e03511d5-7ffc-4148-9598-764209c3a187"
        ],
        "parameters": {
          "TextToSpeechVoice": {
            "languageCode": "ko-KR"
          }
        },
        "overrideConsoleVoice": true,
        "fragments": {
          "SetContactData": "e03511d5-7ffc-4148-9598-764209c3a187"
        },
        "overrideLanguageAttribute": true
      },
      "e03511d5-7ffc-4148-9598-764209c3a187": {
        "position": {
          "x": 172.8,
          "y": 35.2
        },
        "dynamicParams": []
      },
      "85127ca0-2869-4a66-968d-c3d75af03c8e": {
        "position": {
          "x": 461.6,
          "y": 871.2
        },
        "parameters": {
          "TimeLimitSeconds": {
            "unit": 1
          }
        },
        "timeoutUnit": {
          "display": "Seconds",
          "value": "second"
        }
      },
      "b4535f56-5029-4803-890e-d7094b9c08cc": {
        "position": {
          "x": 457.6,
          "y": 663.2
        },
        "conditionMetadata": [
          {
            "id": "a1d42c04-3ad8-4412-89fe-764bfc69f178",
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "\"\""
          },
          {
            "id": "5c0e03fe-bca8-4e25-aa3c-8deb113c5690",
            "operator": {
              "name": "Contains",
              "value": "Contains",
              "shortDisplay": "contains"
            },
            "value": "http"
          }
        ]
      },
      "f701ddd8-24cb-4f3f-9325-fb5bd229f345": {
        "position": {
          "x": 420,
          "y": 232.8
        }
      },
      "344c0866-12d2-4868-ba90-0c5d644273e7": {
        "position": {
          "x": 440,
          "y": 459.2
        },
        "parameters": {
          "Attributes": {
            "AudioS3Url": {
              "useDynamic": true
            },
            "NextIndex": {
              "useDynamic": true
            },
            "HasMore": {
              "useDynamic": true
            },
            "JobId": {
              "useDynamic": true
            }
          }
        },
        "dynamicParams": [
          "AudioS3Url",
          "NextIndex",
          "HasMore",
          "JobId"
        ]
      },
      "97fe811e-882b-4c02-be06-69fecb3888ce": {
        "position": {
          "x": 159.2,
          "y": 475.2
        },
        "parameters": {
          "Attributes": {
            "NextIndex": {
              "useDynamic": true
            }
          }
        },
        "dynamicParams": [
          "NextIndex"
        ]
      },
      "f0bf7194-10a7-4a8c-ae39-5176032e740b": {
        "position": {
          "x": 759.2,
          "y": 487.2
        },
        "parameters": {
          "PromptId": {
            "displayName": "Beep.wav"
          }
        },
        "promptName": "Beep.wav"
      },
      "aafc1faf-3619-4f76-a634-5af65f49b18d": {
        "position": {
          "x": 752,
          "y": 3.2
        },
        "parameters": {
          "Media": {
            "Uri": {
              "useDynamic": true
            }
          }
        },
        "useDynamic": true
      },
      "121dae75-850c-4576-aa00-636114fd55fc": {
        "position": {
          "x": 160.8,
          "y": 240.8
        },
        "parameters": {
          "LambdaFunctionARN": {
            "displayName": "InvokeBotLambda"
          }
        },
        "dynamicMetadata": {
          "action": false
        }
      },
      "998bd497-df95-4308-b0b7-0c42103ed3c2": {
        "position": {
          "x": 429.6,
          "y": 12.8
        },
        "parameters": {
          "LambdaFunctionARN": {
            "displayName": "InvokeBotLambda"
          },
          "LambdaInvocationAttributes": {
            "JobId": {
              "useDynamic": true
            },
            "NextIndex": {
              "useDynamic": true
            },
            "HasMore": {
              "useDynamic": true
            }
          }
        },
        "dynamicMetadata": {
          "action": false,
          "JobId": true,
          "NextIndex": true,
          "HasMore": true
        }
      },
      "685a1f7f-0617-4eab-a8a4-3d878734393c": {
        "position": {
          "x": 747.2,
          "y": 224.8
        },
        "conditionMetadata": [
          {
            "id": "230bf415-b14b-421a-bd23-2275ccdee58e",
            "operator": {
              "name": "Contains",
              "value": "Contains",
              "shortDisplay": "contains"
            },
            "value": "false"
          },
          {
            "id": "9ca28560-ade9-4f98-b29e-8fd9ea7a1f19",
            "operator": {
              "name": "Contains",
              "value": "Contains",
              "shortDisplay": "contains"
            },
            "value": "true"
          }
        ]
      }
    },
    "Annotations": [],
    "name": "ContactFlowPrompt",
    "description": "ContactFlowPrompt",
    "type": "contactFlow",
    "status": "published",
    "hash": {}
  },
  "Actions": [
    {
      "Parameters": {},
      "Identifier": "58f4ee4f-8a66-456a-a09d-067b92bc44b3",
      "Type": "EndFlowExecution",
      "Transitions": {}
    },
    {
      "Parameters": {
        "TextToSpeechVoice": "Seoyeon",
        "TextToSpeechEngine": "Neural",
        "TextToSpeechStyle": "None"
      },
      "Identifier": "88a9374a-374a-443c-a12a-74e5ab4156df",
      "Type": "UpdateContactTextToSpeechVoice",
      "Transitions": {
        "NextAction": "e03511d5-7ffc-4148-9598-764209c3a187",
        "Errors": [
          {
            "NextAction": "121dae75-850c-4576-aa00-636114fd55fc",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "LanguageCode": "ko-KR"
      },
      "Identifier": "e03511d5-7ffc-4148-9598-764209c3a187",
      "Type": "UpdateContactData",
      "Transitions": {
        "NextAction": "121dae75-850c-4576-aa00-636114fd55fc",
        "Errors": [
          {
            "NextAction": "121dae75-850c-4576-aa00-636114fd55fc",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "TimeLimitSeconds": "8"
      },
      "Identifier": "85127ca0-2869-4a66-968d-c3d75af03c8e",
      "Type": "Wait",
      "Transitions": {
        "NextAction": "998bd497-df95-4308-b0b7-0c42103ed3c2",
        "Conditions": [
          {
            "NextAction": "998bd497-df95-4308-b0b7-0c42103ed3c2",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "WaitCompleted"
              ]
            }
          }
        ],
        "Errors": [
          {
            "NextAction": "998bd497-df95-4308-b0b7-0c42103ed3c2",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "ComparisonValue": "$.Attributes.AudioS3Url"
      },
      "Identifier": "b4535f56-5029-4803-890e-d7094b9c08cc",
      "Type": "Compare",
      "Transitions": {
        "NextAction": "998bd497-df95-4308-b0b7-0c42103ed3c2",
        "Conditions": [
          {
            "NextAction": "85127ca0-2869-4a66-968d-c3d75af03c8e",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "\"\""
              ]
            }
          },
          {
            "NextAction": "aafc1faf-3619-4f76-a634-5af65f49b18d",
            "Condition": {
              "Operator": "TextContains",
              "Operands": [
                "http"
              ]
            }
          }
        ],
        "Errors": [
          {
            "NextAction": "998bd497-df95-4308-b0b7-0c42103ed3c2",
            "ErrorType": "NoMatchingCondition"
          }
        ]
      }
    },
    {
      "Parameters": {
        "FlowLoggingBehavior": "Enabled"
      },
      "Identifier": "f701ddd8-24cb-4f3f-9325-fb5bd229f345",
      "Type": "UpdateFlowLoggingBehavior",
      "Transitions": {
        "NextAction": "344c0866-12d2-4868-ba90-0c5d644273e7"
      }
    },
    {
      "Parameters": {
        "Attributes": {
          "AudioS3Url": "$.External.setAttributes.AudioS3Url0",
          "NextIndex": "$.External.setAttributes.NextIndexOut",
          "HasMore": "$.External.setAttributes.HasMore",
          "JobId": "$.External.setAttributes.JobId"
        },
        "TargetContact": "Current"
      },
      "Identifier": "344c0866-12d2-4868-ba90-0c5d644273e7",
      "Type": "UpdateContactAttributes",
      "Transitions": {
        "NextAction": "b4535f56-5029-4803-890e-d7094b9c08cc",
        "Errors": [
          {
            "NextAction": "b4535f56-5029-4803-890e-d7094b9c08cc",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Attributes": {
          "NextIndex": "$.External.setAttributes.NextIndexOut"
        },
        "TargetContact": "Current"
      },
      "Identifier": "97fe811e-882b-4c02-be06-69fecb3888ce",
      "Type": "UpdateContactAttributes",
      "Transitions": {
        "NextAction": "998bd497-df95-4308-b0b7-0c42103ed3c2",
        "Errors": [
          {
            "NextAction": "998bd497-df95-4308-b0b7-0c42103ed3c2",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "PromptId": "arn:aws:connect:ap-northeast-2:600818507157:instance/eefed165-54dc-428e-a0f1-02c2ec35a22e/prompt/3bbd540a-8f88-4018-a1af-83eb118c1200"
      },
      "Identifier": "f0bf7194-10a7-4a8c-ae39-5176032e740b",
      "Type": "MessageParticipant",
      "Transitions": {
        "NextAction": "58f4ee4f-8a66-456a-a09d-067b92bc44b3",
        "Errors": [
          {
            "NextAction": "58f4ee4f-8a66-456a-a09d-067b92bc44b3",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Media": {
          "Uri": "$.Attributes.AudioS3Url",
          "SourceType": "S3",
          "MediaType": "Audio"
        }
      },
      "Identifier": "aafc1faf-3619-4f76-a634-5af65f49b18d",
      "Type": "MessageParticipant",
      "Transitions": {
        "NextAction": "685a1f7f-0617-4eab-a8a4-3d878734393c",
        "Errors": [
          {
            "NextAction": "f0bf7194-10a7-4a8c-ae39-5176032e740b",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "LambdaFunctionARN": "arn:aws:lambda:ap-northeast-2:600818507157:function:InvokeBotLambda",
        "InvocationTimeLimitSeconds": "8",
        "InvocationType": "SYNCHRONOUS",
        "LambdaInvocationAttributes": {
          "action": "start_stream"
        },
        "ResponseValidation": {
          "ResponseType": "JSON"
        }
      },
      "Identifier": "121dae75-850c-4576-aa00-636114fd55fc",
      "Type": "InvokeLambdaFunction",
      "Transitions": {
        "NextAction": "97fe811e-882b-4c02-be06-69fecb3888ce",
        "Errors": [
          {
            "NextAction": "97fe811e-882b-4c02-be06-69fecb3888ce",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "LambdaFunctionARN": "arn:aws:lambda:ap-northeast-2:600818507157:function:InvokeBotLambda",
        "InvocationTimeLimitSeconds": "8",
        "InvocationType": "SYNCHRONOUS",
        "LambdaInvocationAttributes": {
          "action": "get_next_batch",
          "JobId": "$.External.setAttributes.JobId",
          "NextIndex": "$.Attributes.NextIndex",
          "HasMore": "$.External.setAttributes.HasMore"
        },
        "ResponseValidation": {
          "ResponseType": "JSON"
        }
      },
      "Identifier": "998bd497-df95-4308-b0b7-0c42103ed3c2",
      "Type": "InvokeLambdaFunction",
      "Transitions": {
        "NextAction": "f701ddd8-24cb-4f3f-9325-fb5bd229f345",
        "Errors": [
          {
            "NextAction": "344c0866-12d2-4868-ba90-0c5d644273e7",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "ComparisonValue": "$.Attributes.HasMore"
      },
      "Identifier": "685a1f7f-0617-4eab-a8a4-3d878734393c",
      "Type": "Compare",
      "Transitions": {
        "NextAction": "121dae75-850c-4576-aa00-636114fd55fc",
        "Conditions": [
          {
            "NextAction": "f0bf7194-10a7-4a8c-ae39-5176032e740b",
            "Condition": {
              "Operator": "TextContains",
              "Operands": [
                "false"
              ]
            }
          },
          {
            "NextAction": "998bd497-df95-4308-b0b7-0c42103ed3c2",
            "Condition": {
              "Operator": "TextContains",
              "Operands": [
                "true"
              ]
            }
          }
        ],
        "Errors": [
          {
            "NextAction": "121dae75-850c-4576-aa00-636114fd55fc",
            "ErrorType": "NoMatchingCondition"
          }
        ]
      }
    }
  ]
}